<div
  class="modal fade"
  id="catalogEntryModal"
  tabindex="-1"
  aria-labelledby="catalogEntryModalLabel"
  aria-hidden="true"
  data-bs-backdrop="static"
>
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="catalogEntryModalLabel">{{ modalTitle() }}</h5>
        <button type="button" class="btn-close" (click)="closeModal()" aria-label="Close"></button>
      </div>

      <form [formGroup]="entryForm" (ngSubmit)="onSubmit()">
        <div class="modal-body">
          @if (isLoading()) {
            <div class="text-center py-5">
              <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Cargando...</span>
              </div>
            </div>
          } @else {
            @if (error()) {
              <div class="alert alert-danger alert-dismissible fade show" role="alert">
                {{ error() }}
                <button type="button" class="btn-close" (click)="error.set(null)"></button>
              </div>
            }

            <div class="mb-3">
              <label for="name" class="form-label"
                >Nombre <span class="text-danger">*</span></label
              >
              <input
                type="text"
                class="form-control"
                id="name"
                formControlName="name"
                [class.is-invalid]="isFieldInvalid('name')"
              />
              @if (isFieldInvalid('name')) {
                <div class="invalid-feedback">{{ getFieldError('name') }}</div>
              }
            </div>

            <div class="mb-3">
              <label for="alias" class="form-label">Alias</label>
              <input
                type="text"
                class="form-control"
                id="alias"
                formControlName="alias"
                [class.is-invalid]="isFieldInvalid('alias')"
              />
              <small class="form-text text-muted">
                Identificador alternativo (opcional)
              </small>
              @if (isFieldInvalid('alias')) {
                <div class="invalid-feedback">{{ getFieldError('alias') }}</div>
              }
            </div>

            <div class="mb-3">
              <label for="description" class="form-label">Descripción</label>
              <textarea
                class="form-control"
                id="description"
                formControlName="description"
                rows="3"
                [class.is-invalid]="isFieldInvalid('description')"
              ></textarea>
              <small class="form-text text-muted">
                Descripción detallada de la entrada (opcional)
              </small>
              @if (isFieldInvalid('description')) {
                <div class="invalid-feedback">{{ getFieldError('description') }}</div>
              }
            </div>
          }
        </div>

        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" (click)="closeModal()">
            Cancelar
          </button>
          <button type="submit" class="btn btn-primary" [disabled]="isSaving() || isLoading()">
            @if (isSaving()) {
              <span class="spinner-border spinner-border-sm me-2" role="status"></span>
              Guardando...
            } @else {
              @if (isEditMode()) {
                Actualizar Entrada
              } @else {
                Crear Entrada
              }
            }
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
